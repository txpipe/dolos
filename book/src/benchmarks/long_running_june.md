# Long-running operation - June test

A "long-running" test refers to a type of test that is designed to evaluate the system's behavior under sustained use over a long period of time. These tests can be used to identify problems that might not be apparent in short-term testing scenarios.

Among other things, long-running tests are often used to identify memory leaks, resource leaks, or degradation in system performance over time. If a system runs perfectly for an hour but starts having issues after several hours or days, a long-running test would help identify such problems.

In particular, we want to measure CPU and memory usages of Dolos compared to the Haskell node. The main goal of Dolos is to provide a lightweight alternative (with substantially reduced features) for data access use-cases. To perform the comparison, both implementations were hosted under the equivalent conditions:

- same hardware
- both fully-synced to the Preview network
- similar client request profile (1 chain-sync consumer)

## CPU Usage

In this analysis we compare CPU usage. It is expressed as shares of a vCPU (~core). 1 share represents 1/1000 of a vCPU. Each bucket represent the average of shares utilized by each process in a 30-minute period. The information was gathered after continuous operations throughout a 2-day period.

| Time                | Dolos | Haskell |
| ------------------- | ----- | ------- |
| 2023-06-19 08:30:00 | 2.11  | 222     |
| 2023-06-19 09:00:00 | 1.87  | 222     |
| 2023-06-19 09:30:00 | 2.00  | 231     |
| 2023-06-19 10:00:00 | 2.01  | 243     |
| 2023-06-19 10:30:00 | 1.98  | 240     |
| 2023-06-19 11:00:00 | 2.48  | 241     |
| 2023-06-19 11:30:00 | 2.16  | 226     |
| 2023-06-19 12:00:00 | 2.23  | 240     |
| 2023-06-19 12:30:00 | 2.12  | 241     |
| 2023-06-19 13:00:00 | 2.42  | 236     |
| 2023-06-19 13:30:00 | 2.11  | 232     |
| 2023-06-19 14:00:00 | 2.00  | 231     |
| 2023-06-19 14:30:00 | 2.06  | 278     |
| 2023-06-19 15:00:00 | 2.38  | 248     |
| 2023-06-19 15:30:00 | 1.97  | 224     |
| 2023-06-19 16:00:00 | 2.00  | 161     |
| 2023-06-19 16:30:00 | 2.25  | 236     |
| 2023-06-19 17:00:00 | 1.90  | 234     |
| 2023-06-19 17:30:00 | 1.98  | 236     |
| 2023-06-19 18:00:00 | 1.92  | 227     |
| 2023-06-19 18:30:00 | 2.18  | 232     |
| 2023-06-19 19:00:00 | 2.06  | 231     |
| 2023-06-19 19:30:00 | 2.25  | 242     |
| 2023-06-19 20:00:00 | 2.09  | 239     |
| 2023-06-19 20:30:00 | 2.25  | 250     |
| 2023-06-19 21:00:00 | 2.05  | 230     |
| 2023-06-19 21:30:00 | 1.96  | 229     |
| 2023-06-19 22:00:00 | 2.06  | 226     |
| 2023-06-19 22:30:00 | 2.22  | 237     |
| 2023-06-19 23:00:00 | 2.34  | 234     |
| 2023-06-19 23:30:00 | 2.36  | 238     |
| 2023-06-20 00:00:00 | 2.16  | 238     |
| 2023-06-20 00:30:00 | 2.46  | 236     |
| 2023-06-20 01:00:00 | 2.26  | 241     |
| 2023-06-20 01:30:00 | 2.21  | 242     |
| 2023-06-20 02:00:00 | 1.89  | 226     |
| 2023-06-20 02:30:00 | 2.53  | 252     |
| 2023-06-20 03:00:00 | 1.93  | 226     |
| 2023-06-20 03:30:00 | 2.06  | 232     |
| 2023-06-20 04:00:00 | 2.37  | 240     |
| 2023-06-20 04:30:00 | 2.65  | 250     |
| 2023-06-20 05:00:00 | 2.12  | 233     |
| 2023-06-20 05:30:00 | 2.41  | 329     |
| 2023-06-20 06:00:00 | 2.36  | 231     |
| 2023-06-20 06:30:00 | 2.80  | 273     |
| 2023-06-20 07:00:00 | 2.22  | 226     |
| 2023-06-20 07:30:00 | 2.04  | 217     |
| 2023-06-20 08:00:00 | 2.50  | 238     |
| 2023-06-20 08:30:00 | 2.24  | 228     |
| 2023-06-20 09:00:00 | 2.51  | 230     |
| 2023-06-20 09:30:00 | 2.31  | 235     |
| 2023-06-20 10:00:00 | 2.15  | 225     |
| 2023-06-20 10:30:00 | 2.36  | 231     |
| 2023-06-20 11:00:00 | 2.91  | 232     |
| 2023-06-20 11:30:00 | 2.83  | 239     |
| 2023-06-20 12:00:00 | 2.64  | 238     |
| 2023-06-20 12:30:00 | 2.76  | 231     |
| 2023-06-20 13:00:00 | 2.88  | 256     |
| 2023-06-20 13:30:00 | 2.79  | 233     |
| 2023-06-20 14:00:00 | 2.35  | 222     |
| 2023-06-20 14:30:00 | 2.12  | 223     |
| 2023-06-20 15:00:00 | 2.69  | 230     |
| 2023-06-20 15:30:00 | 2.30  | 228     |
| 2023-06-20 16:00:00 | 2.37  | 232     |
| 2023-06-20 16:30:00 | 2.45  | 241     |
| 2023-06-20 17:00:00 | 2.63  | 230     |
| 2023-06-20 17:30:00 | 3.08  | 239     |
| 2023-06-20 18:00:00 | 2.72  | 225     |
| 2023-06-20 18:30:00 | 2.40  | 222     |
| 2023-06-20 19:00:00 | 2.61  | 229     |
| 2023-06-20 19:30:00 | 2.60  | 231     |
| 2023-06-20 20:00:00 | 2.43  | 235     |
| 2023-06-20 20:30:00 | 2.62  | 229     |
| 2023-06-20 21:00:00 | 2.19  | 220     |
| 2023-06-20 21:30:00 | 2.62  | 232     |
| 2023-06-20 22:00:00 | 2.76  | 232     |
| 2023-06-20 22:30:00 | 2.01  | 244     |
| 2023-06-20 23:00:00 | 2.30  | 231     |
| 2023-06-20 23:30:00 | 2.22  | 252     |
| 2023-06-21 00:00:00 | 2.79  | 234     |
| 2023-06-21 00:30:00 | 2.33  | 233     |
| 2023-06-21 01:00:00 | 2.31  | 229     |
| 2023-06-21 01:30:00 | 2.56  | 222     |
| 2023-06-21 02:00:00 | 2.71  | 237     |
| 2023-06-21 02:30:00 | 2.51  | 248     |
| 2023-06-21 03:00:00 | 2.54  | 236     |
| 2023-06-21 03:30:00 | 2.25  | 233     |
| 2023-06-21 04:00:00 | 2.89  | 242     |
| 2023-06-21 04:30:00 | 2.35  | 229     |
| 2023-06-21 05:00:00 | 2.65  | 236     |
| 2023-06-21 05:30:00 | 2.18  | 222     |
| 2023-06-21 06:00:00 | 2.64  | 227     |
| 2023-06-21 06:30:00 | 3.03  | 239     |
| 2023-06-21 07:00:00 | 2.26  | 229     |
| 2023-06-21 07:30:00 | 3.81  | 268     |
| 2023-06-21 08:00:00 | 2.90  | 262     |
| 2023-06-21 08:30:00 | 2.85  | 247     |


## Memory Usage

In this analysis we compare memory usage. It is expressed as total amount of data (KB, MB, GB). Each bucket represent the average of memory utilized by each process in a 30-minute period. The information was gathered after continuous operations throughout a 2-day period.

| Time                | Dolos   | Haskell |
| ------------------- | ------- | ------- |
| 2023-06-19 08:30:00 | 20.3 MB | 2.18 GB |
| 2023-06-19 09:00:00 | 20.4 MB | 2.18 GB |
| 2023-06-19 09:30:00 | 20.7 MB | 2.18 GB |
| 2023-06-19 10:00:00 | 20.9 MB | 2.18 GB |
| 2023-06-19 10:30:00 | 21.1 MB | 2.18 GB |
| 2023-06-19 11:00:00 | 21.1 MB | 2.18 GB |
| 2023-06-19 11:30:00 | 21.2 MB | 2.18 GB |
| 2023-06-19 12:00:00 | 21.4 MB | 2.18 GB |
| 2023-06-19 12:30:00 | 21.7 MB | 2.18 GB |
| 2023-06-19 13:00:00 | 21.9 MB | 2.18 GB |
| 2023-06-19 13:30:00 | 21.9 MB | 2.18 GB |
| 2023-06-19 14:00:00 | 22.2 MB | 2.18 GB |
| 2023-06-19 14:30:00 | 22.3 MB | 2.18 GB |
| 2023-06-19 15:00:00 | 22.5 MB | 2.18 GB |
| 2023-06-19 15:30:00 | 22.8 MB | 2.18 GB |
| 2023-06-19 16:00:00 | 23.0 MB | 2.18 GB |
| 2023-06-19 16:30:00 | 23.5 MB | 2.18 GB |
| 2023-06-19 17:00:00 | 24.1 MB | 2.18 GB |
| 2023-06-19 17:30:00 | 24.7 MB | 2.18 GB |
| 2023-06-19 18:00:00 | 25.3 MB | 2.18 GB |
| 2023-06-19 18:30:00 | 26.0 MB | 2.18 GB |
| 2023-06-19 19:00:00 | 26.6 MB | 2.18 GB |
| 2023-06-19 19:30:00 | 27.3 MB | 2.18 GB |
| 2023-06-19 20:00:00 | 27.8 MB | 2.18 GB |
| 2023-06-19 20:30:00 | 28.5 MB | 2.18 GB |
| 2023-06-19 21:00:00 | 28.9 MB | 2.18 GB |
| 2023-06-19 21:30:00 | 29.5 MB | 2.18 GB |
| 2023-06-19 22:00:00 | 30.1 MB | 2.18 GB |
| 2023-06-19 22:30:00 | 30.6 MB | 2.18 GB |
| 2023-06-19 23:00:00 | 31.2 MB | 2.18 GB |
| 2023-06-19 23:30:00 | 32.0 MB | 2.18 GB |
| 2023-06-20 00:00:00 | 32.5 MB | 2.18 GB |
| 2023-06-20 00:30:00 | 33.2 MB | 2.18 GB |
| 2023-06-20 01:00:00 | 33.8 MB | 2.18 GB |
| 2023-06-20 01:30:00 | 34.5 MB | 2.18 GB |
| 2023-06-20 02:00:00 | 34.7 MB | 2.18 GB |
| 2023-06-20 02:30:00 | 34.8 MB | 2.18 GB |
| 2023-06-20 03:00:00 | 35.1 MB | 2.18 GB |
| 2023-06-20 03:30:00 | 35.1 MB | 2.18 GB |
| 2023-06-20 04:00:00 | 35.3 MB | 2.18 GB |
| 2023-06-20 04:30:00 | 35.1 MB | 2.18 GB |
| 2023-06-20 05:00:00 | 35.5 MB | 2.18 GB |
| 2023-06-20 05:30:00 | 35.8 MB | 2.18 GB |
| 2023-06-20 06:00:00 | 36.0 MB | 2.18 GB |
| 2023-06-20 06:30:00 | 36.1 MB | 2.18 GB |
| 2023-06-20 07:00:00 | 36.5 MB | 2.18 GB |
| 2023-06-20 07:30:00 | 36.6 MB | 2.18 GB |
| 2023-06-20 08:00:00 | 36.9 MB | 2.18 GB |
| 2023-06-20 08:30:00 | 37.1 MB | 2.18 GB |
| 2023-06-20 09:00:00 | 37.0 MB | 2.18 GB |
| 2023-06-20 09:30:00 | 37.2 MB | 2.18 GB |
| 2023-06-20 10:00:00 | 37.5 MB | 2.18 GB |
| 2023-06-20 10:30:00 | 37.5 MB | 2.18 GB |
| 2023-06-20 11:00:00 | 37.6 MB | 2.18 GB |
| 2023-06-20 11:30:00 | 38.1 MB | 2.18 GB |
| 2023-06-20 12:00:00 | 38.1 MB | 2.18 GB |
| 2023-06-20 12:30:00 | 38.2 MB | 2.18 GB |
| 2023-06-20 13:00:00 | 38.5 MB | 2.18 GB |
| 2023-06-20 13:30:00 | 38.5 MB | 2.18 GB |
| 2023-06-20 14:00:00 | 38.8 MB | 2.18 GB |
| 2023-06-20 14:30:00 | 39.0 MB | 2.18 GB |
| 2023-06-20 15:00:00 | 39.2 MB | 2.18 GB |
| 2023-06-20 15:30:00 | 39.2 MB | 2.18 GB |
| 2023-06-20 16:00:00 | 39.3 MB | 2.18 GB |
| 2023-06-20 16:30:00 | 39.6 MB | 2.18 GB |
| 2023-06-20 17:00:00 | 39.7 MB | 2.18 GB |
| 2023-06-20 17:30:00 | 39.7 MB | 2.18 GB |
| 2023-06-20 18:00:00 | 39.9 MB | 2.18 GB |
| 2023-06-20 18:30:00 | 40.2 MB | 2.18 GB |
| 2023-06-20 19:00:00 | 40.1 MB | 2.18 GB |
| 2023-06-20 19:30:00 | 40.3 MB | 2.18 GB |
| 2023-06-20 20:00:00 | 40.5 MB | 2.18 GB |
| 2023-06-20 20:30:00 | 40.7 MB | 2.18 GB |
| 2023-06-20 21:00:00 | 40.7 MB | 2.18 GB |
| 2023-06-20 21:30:00 | 40.8 MB | 2.18 GB |
| 2023-06-20 22:00:00 | 40.9 MB | 2.18 GB |
| 2023-06-20 22:30:00 | 41.1 MB | 2.18 GB |
| 2023-06-20 23:00:00 | 41.1 MB | 2.18 GB |
| 2023-06-20 23:30:00 | 41.2 MB | 2.18 GB |
| 2023-06-21 00:00:00 | 41.4 MB | 2.18 GB |
| 2023-06-21 00:30:00 | 41.5 MB | 2.18 GB |
| 2023-06-21 01:00:00 | 41.8 MB | 2.18 GB |
| 2023-06-21 01:30:00 | 41.8 MB | 2.18 GB |
| 2023-06-21 02:00:00 | 41.9 MB | 2.18 GB |
| 2023-06-21 02:30:00 | 42.3 MB | 2.18 GB |
| 2023-06-21 03:00:00 | 42.2 MB | 2.18 GB |
| 2023-06-21 03:30:00 | 42.5 MB | 2.18 GB |
| 2023-06-21 04:00:00 | 42.7 MB | 2.18 GB |
| 2023-06-21 04:30:00 | 42.2 MB | 2.18 GB |
| 2023-06-21 05:00:00 | 42.7 MB | 2.18 GB |
| 2023-06-21 05:30:00 | 43.1 MB | 2.18 GB |
| 2023-06-21 06:00:00 | 43.4 MB | 2.18 GB |
| 2023-06-21 06:30:00 | 43.5 MB | 2.18 GB |
| 2023-06-21 07:00:00 | 43.7 MB | 2.18 GB |
| 2023-06-21 07:30:00 | 16.3 MB | 2.18 GB |
| 2023-06-21 08:00:00 | 16.7 MB | 2.18 GB |
| 2023-06-21 08:30:00 | 17.1 MB | 2.18 GB |
